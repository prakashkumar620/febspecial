<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Valentine's Day ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- ============================================ -->
    <!-- INTERNAL CSS STYLES -->
    <!-- ============================================ -->
    <style>
        /* ========== CSS RESET & BASE STYLES ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: auto;
        }

        body {
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a0a14 0%, #2d0a1f 25%, #3d0f2a 50%, #2d0a1f 75%, #1a0a14 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            height: 100vh;
            overflow: hidden;
            color: #fff;
            cursor: none;
        }

        /* Custom cursor */
        .custom-cursor {
            width: 20px;
            height: 20px;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            font-size: 20px;
            transform: translate(-50%, -50%);
            transition: transform 0.1s ease;
        }

        /* Sparkle trail */
        .sparkle {
            position: fixed;
            pointer-events: none;
            z-index: 9998;
            animation: sparkleFloat 1s ease-out forwards;
        }

        @keyframes sparkleFloat {
            0% { transform: scale(1) rotate(0deg); opacity: 1; }
            100% { transform: scale(0) rotate(180deg) translateY(-30px); opacity: 0; }
        }

        /* Gradient animation for background */
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* ========== STARFIELD BACKGROUND ========== */
        .starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: #fff;
            border-radius: 50%;
            animation: twinkle 2s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.5); }
        }

        /* ========== NEON GLOW EFFECTS ========== */
        .neon-text {
            text-shadow: 
                0 0 5px #ff6b9d,
                0 0 10px #ff6b9d,
                0 0 20px #ff6b9d,
                0 0 40px #ff1493,
                0 0 80px #ff1493;
            animation: neonPulse 2s ease-in-out infinite;
        }

        @keyframes neonPulse {
            0%, 100% { 
                text-shadow: 
                    0 0 5px #ff6b9d,
                    0 0 10px #ff6b9d,
                    0 0 20px #ff6b9d,
                    0 0 40px #ff1493,
                    0 0 80px #ff1493;
            }
            50% { 
                text-shadow: 
                    0 0 10px #ff6b9d,
                    0 0 20px #ff6b9d,
                    0 0 40px #ff6b9d,
                    0 0 80px #ff1493,
                    0 0 120px #ff1493;
            }
        }

        /* ========== 3D ROTATING HEART ========== */
        .heart-3d-container {
            perspective: 1000px;
            margin: 30px auto;
        }

        .heart-3d {
            width: 150px;
            height: 150px;
            position: relative;
            transform-style: preserve-3d;
            animation: rotate3D 4s ease-in-out infinite;
        }

        .heart-3d::before,
        .heart-3d::after {
            content: '';
            position: absolute;
            top: 0;
            width: 75px;
            height: 120px;
            background: linear-gradient(180deg, #ff1493, #ff6b9d, #ff1493);
            border-radius: 75px 75px 0 0;
            box-shadow: 0 0 30px #ff1493, inset 0 0 30px rgba(255,255,255,0.3);
        }

        .heart-3d::before {
            left: 75px;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
        }

        .heart-3d::after {
            left: 0;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }

        @keyframes rotate3D {
            0% { transform: rotateY(0deg) rotateX(10deg); }
            25% { transform: rotateY(90deg) rotateX(10deg); }
            50% { transform: rotateY(180deg) rotateX(10deg); }
            75% { transform: rotateY(270deg) rotateX(10deg); }
            100% { transform: rotateY(360deg) rotateX(10deg); }
        }

        /* ========== LOVE LETTER ENVELOPE ========== */
        .envelope-container {
            perspective: 1000px;
            margin: 30px auto;
            cursor: pointer;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .envelope-container.opened {
            pointer-events: none;
            transform: scale(0.5) translateY(-60px);
            opacity: 0;
        }

        .envelope {
            width: 300px;
            height: 200px;
            position: relative;
            background: linear-gradient(135deg, #ffb3d9, #ff99cc);
            border-radius: 10px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            transition: all 0.5s ease;
        }

        .envelope:hover {
            transform: scale(1.08);
            box-shadow: 0 25px 60px rgba(255,20,147,0.4);
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100px;
            background: linear-gradient(135deg, #ff99cc, #ff66b2);
            clip-path: polygon(0 0, 50% 100%, 100% 0);
            transform-origin: top;
            transition: transform 0.6s ease;
            z-index: 10;
        }

        .envelope.open .envelope-flap {
            transform: rotateX(180deg);
        }

        .envelope-body {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            background: linear-gradient(135deg, #ffccdd, #ffb3d9);
            border-radius: 0 0 10px 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .letter-small {
            width: 260px;
            height: 120px;
            background: #fff;
            border-radius: 5px;
            padding: 15px;
            transform: translateY(50px);
            transition: transform 0.6s ease 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .envelope.open .letter-small {
            transform: translateY(-80px);
        }

        .letter-small-text {
            font-family: 'Dancing Script', cursive;
            color: #c44569;
            font-size: 14px;
            line-height: 1.4;
            text-align: center;
        }

        .envelope-seal {
            position: absolute;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, #ff1493, #c44569);
            border-radius: 50%;
            z-index: 20;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        .envelope.open .envelope-seal {
            opacity: 0;
            transform: translateX(-50%) scale(0);
        }

        /* ========== REVEALED LETTER (full page) ========== */
        .letter-reveal {
            position: relative;
            max-width: 550px;
            width: 90%;
            background: linear-gradient(145deg, #fff9f0, #fff5f5, #fff0f5);
            border-radius: 20px;
            padding: 50px 40px;
            opacity: 0;
            transform: translateY(60px) scale(0.9);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.5s;
            box-shadow: 0 25px 80px rgba(255,20,147,0.2), 0 10px 30px rgba(0,0,0,0.2);
            border: 2px solid rgba(255,20,147,0.15);
            pointer-events: none;
        }

        .letter-reveal.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: auto;
        }

        .letter-reveal::before {
            content: 'üíå';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 40px;
            filter: drop-shadow(0 4px 8px rgba(255,20,147,0.3));
        }

        .letter-reveal::after {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 22px;
            background: linear-gradient(45deg, #ff1493, #ff6b9d, #ffb3d9, #ff6b9d, #ff1493);
            background-size: 300% 300%;
            animation: glowBorderAnim 3s linear infinite;
            z-index: -1;
            filter: blur(8px);
            opacity: 0.5;
        }

        .letter-greeting {
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            color: #c44569;
            margin-bottom: 20px;
            text-align: center;
        }

        .letter-text {
            font-family: 'Dancing Script', cursive;
            color: #6b2d3e;
            font-size: 1.3rem;
            line-height: 2;
            text-align: center;
            white-space: pre-line;
        }

        .letter-signature {
            font-family: 'Dancing Script', cursive;
            color: #ff1493;
            font-size: 1.5rem;
            text-align: right;
            margin-top: 25px;
        }

        .letter-hearts {
            text-align: center;
            font-size: 1.8rem;
            margin-top: 15px;
            animation: heartbeat 1.5s ease infinite;
        }

        /* ========== PHOTO MEMORY CAROUSEL ========== */
        .memory-carousel {
            display: flex;
            gap: 30px;
            overflow-x: auto;
            padding: 30px 10px;
            scroll-snap-type: x mandatory;
            scrollbar-width: none;
        }

        .memory-carousel::-webkit-scrollbar {
            display: none;
        }

        .memory-card {
            min-width: 280px;
            height: 350px;
            background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border-radius: 20px;
            padding: 20px;
            scroll-snap-align: center;
            transform: rotate(-2deg);
            transition: all 0.4s ease;
            border: 2px solid rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
        }

        .memory-card::before {
            content: 'üìå';
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
        }

        .memory-card:nth-child(even) {
            transform: rotate(2deg);
        }

        .memory-card:hover {
            transform: rotate(0deg) scale(1.05);
            box-shadow: 0 20px 40px rgba(255,20,147,0.3);
        }

        .memory-placeholder {
            width: 100%;
            height: 200px;
            background: linear-gradient(145deg, rgba(255,107,157,0.3), rgba(196,69,105,0.3));
            border-radius: 10px;
            margin-top: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            position: relative;
            overflow: hidden;
        }

        .memory-placeholder::after {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.2) 50%, transparent 70%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%); }
            100% { transform: translateX(100%) translateY(100%); }
        }

        .memory-date {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: 15px;
        }

        .memory-caption {
            font-size: 1.1rem;
            margin-top: 10px;
            font-style: italic;
        }

        /* ========== LOVE QUIZ SECTION ========== */
        .quiz-section {
            padding: 50px 20px;
            text-align: center;
        }

        .quiz-container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 40px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .quiz-question {
            font-size: 1.5rem;
            margin-bottom: 30px;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .quiz-option {
            padding: 20px;
            background: linear-gradient(145deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }

        .quiz-option:hover {
            background: linear-gradient(145deg, #ff6b9d, #c44569);
            border-color: #ff1493;
            transform: translateX(10px);
            box-shadow: 0 0 30px rgba(255,20,147,0.5);
        }

        .quiz-option.correct {
            background: linear-gradient(145deg, #00b894, #00a884);
            border-color: #00b894;
            animation: correctPulse 0.5s ease;
        }

        .quiz-option.wrong {
            background: linear-gradient(145deg, #d63031, #e84118);
            border-color: #d63031;
            animation: shake 0.5s ease;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .quiz-result {
            margin-top: 30px;
            padding: 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            display: none;
        }

        .quiz-score {
            font-size: 3rem;
            font-weight: bold;
            color: #ff6b9d;
        }

        /* ========== TIMELINE SECTION ========== */
        .timeline-section {
            padding: 50px 20px;
        }

        .timeline {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #ff1493, #ff6b9d, #c44569);
            border-radius: 2px;
            box-shadow: 0 0 20px #ff1493;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 50px;
            padding: 0 50px;
        }

        .timeline-item:nth-child(odd) {
            text-align: right;
            padding-right: calc(50% + 30px);
            padding-left: 0;
        }

        .timeline-item:nth-child(even) {
            text-align: left;
            padding-left: calc(50% + 30px);
            padding-right: 0;
        }

        .timeline-dot {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            background: #ff1493;
            border-radius: 50%;
            box-shadow: 0 0 20px #ff1493;
            animation: dotPulse 2s ease-in-out infinite;
        }

        @keyframes dotPulse {
            0%, 100% { box-shadow: 0 0 20px #ff1493; }
            50% { box-shadow: 0 0 40px #ff1493, 0 0 60px #ff6b9d; }
        }

        .timeline-content {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }

        .timeline-content:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(255,20,147,0.3);
        }

        .timeline-date {
            font-size: 0.9rem;
            color: #ff6b9d;
            margin-bottom: 10px;
        }

        .timeline-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        /* ========== FIREWORKS CANVAS ========== */
        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3002;
        }

        /* ========== EDIT MODE PANEL ========== */
        .edit-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
        }

        .edit-panel.hidden {
            display: none;
        }

        .edit-panel-content {
            background: linear-gradient(145deg, #1a0a14, #2d0a1f);
            border: 2px solid rgba(255,20,147,0.4);
            border-radius: 30px;
            padding: 40px;
            max-width: 700px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(255,20,147,0.3);
        }

        .edit-panel-content::-webkit-scrollbar {
            width: 6px;
        }

        .edit-panel-content::-webkit-scrollbar-thumb {
            background: #ff1493;
            border-radius: 3px;
        }

        .edit-panel-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 10px;
            color: #ff6b9d;
        }

        .edit-panel-subtitle {
            text-align: center;
            opacity: 0.7;
            margin-bottom: 30px;
            font-size: 0.95rem;
        }

        .edit-group {
            margin-bottom: 25px;
        }

        .edit-group label {
            display: block;
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #ff6b9d;
            font-weight: 600;
        }

        .edit-input, .edit-textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid rgba(255,20,147,0.3);
            border-radius: 15px;
            background: rgba(0,0,0,0.4);
            color: #fff;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            outline: none;
            transition: all 0.3s ease;
        }

        .edit-input:focus, .edit-textarea:focus {
            border-color: #ff1493;
            box-shadow: 0 0 20px rgba(255,20,147,0.3);
        }

        .edit-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .photo-upload-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .photo-upload-card {
            width: 100%;
            aspect-ratio: 1;
            border: 2px dashed rgba(255,20,147,0.4);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            background: rgba(0,0,0,0.3);
        }

        .photo-upload-card:hover {
            border-color: #ff1493;
            box-shadow: 0 0 20px rgba(255,20,147,0.3);
        }

        .photo-upload-card .upload-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .photo-upload-card .upload-text {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .photo-upload-card img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 13px;
        }

        .photo-upload-card .remove-photo {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 28px;
            height: 28px;
            background: rgba(255,0,0,0.8);
            border: none;
            border-radius: 50%;
            color: #fff;
            font-size: 14px;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 5;
        }

        .photo-upload-card.has-photo .remove-photo {
            display: flex;
        }

        .photo-upload-card.has-photo .upload-icon,
        .photo-upload-card.has-photo .upload-text {
            display: none;
        }

        .photo-upload-card .photo-caption-input {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 8px;
            background: rgba(0,0,0,0.7);
            border: none;
            color: #fff;
            font-size: 0.75rem;
            text-align: center;
            outline: none;
            display: none;
        }

        .photo-upload-card.has-photo .photo-caption-input {
            display: block;
        }

        .launch-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(145deg, #ff1493, #ff6b9d);
            border: none;
            border-radius: 50px;
            color: #fff;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            font-family: 'Poppins', sans-serif;
        }

        .launch-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255,20,147,0.5);
        }

        /* ========== SHARE BUTTON ========== */
        .share-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(145deg, #ff1493, #c44569);
            border: none;
            cursor: pointer;
            z-index: 999;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 5px 20px rgba(255,20,147,0.5);
            transition: all 0.3s ease;
        }

        .share-btn:hover {
            transform: scale(1.1);
        }

        .share-btn.visible {
            display: flex;
        }

        /* ========== EDIT BTN (back to editor) ========== */
        .edit-mode-btn {
            position: fixed;
            bottom: 90px;
            left: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(145deg, #636e72, #2d3436);
            border: none;
            cursor: pointer;
            z-index: 999;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        .edit-mode-btn:hover {
            transform: scale(1.1);
        }

        .edit-mode-btn.visible {
            display: flex;
        }

        /* ========== SHARE MODAL ========== */
        .share-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 10001;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .share-modal.active {
            display: flex;
        }

        .share-modal-content {
            background: linear-gradient(145deg, #1a0a14, #2d0a1f);
            border: 2px solid rgba(255,20,147,0.4);
            border-radius: 25px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .share-modal-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            color: #ff6b9d;
            margin-bottom: 20px;
        }

        .share-link-box {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }

        .share-link-input {
            flex: 1;
            padding: 15px;
            border: 2px solid rgba(255,20,147,0.3);
            border-radius: 15px;
            background: rgba(0,0,0,0.4);
            color: #fff;
            font-size: 0.85rem;
            outline: none;
        }

        .copy-btn {
            padding: 15px 25px;
            background: linear-gradient(145deg, #ff1493, #c44569);
            border: none;
            border-radius: 15px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .copy-btn:hover {
            transform: scale(1.05);
        }

        .share-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .share-social-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 50px;
            color: #fff;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .share-social-btn:hover {
            transform: scale(1.05);
        }

        .share-whatsapp {
            background: #25D366;
        }

        .share-telegram {
            background: #0088cc;
        }

        .share-close {
            margin-top: 20px;
            padding: 10px 30px;
            background: transparent;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .share-close:hover {
            border-color: #ff1493;
            color: #ff1493;
        }

        /* ========== MEMORY PHOTO UPLOADED STYLE ========== */
        .memory-placeholder.has-image {
            font-size: 0;
        }

        .memory-placeholder.has-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }

        .memory-placeholder.has-image::after {
            display: none;
        }

        /* ========== ROSE PETALS ========== */
        .rose-petal {
            position: fixed;
            pointer-events: none;
            animation: petalFall 6s linear forwards;
            z-index: 5;
        }

        @keyframes petalFall {
            0% { 
                transform: translateY(-50px) rotate(0deg) translateX(0);
                opacity: 1;
            }
            100% { 
                transform: translateY(100vh) rotate(720deg) translateX(100px);
                opacity: 0;
            }
        }

        /* ========== GLOWING BORDERS ========== */
        .glow-border {
            position: relative;
        }

        .glow-border::before {
            content: '';
            position: absolute;
            inset: -3px;
            background: linear-gradient(45deg, #ff1493, #ff6b9d, #c44569, #ff1493);
            background-size: 400% 400%;
            animation: glowBorderAnim 3s linear infinite;
            border-radius: inherit;
            z-index: -1;
            filter: blur(10px);
        }

        @keyframes glowBorderAnim {
            0% { background-position: 0% 50%; }
            100% { background-position: 400% 50%; }
        }

        /* ========== FLOATING HEARTS CONTAINER ========== */
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            font-size: 20px;
            animation: floatUp 8s ease-in infinite;
            opacity: 0.8;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0.5);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100px) rotate(720deg) scale(1);
                opacity: 0;
            }
        }

        /* ========== PAGE NAVIGATION (DOTS + ARROWS) ========== */
        .page-nav {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(15px);
            padding: 12px 24px;
            border-radius: 50px;
            border: 1px solid rgba(255,20,147,0.3);
        }

        .page-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            border: 2px solid rgba(255,20,147,0.4);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .page-dot.active {
            background: #ff1493;
            box-shadow: 0 0 15px #ff1493, 0 0 30px rgba(255,20,147,0.4);
            transform: scale(1.3);
        }

        .page-dot:hover:not(.active) {
            background: rgba(255,20,147,0.5);
            transform: scale(1.15);
        }

        .page-arrow {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(145deg, rgba(255,20,147,0.3), rgba(196,69,105,0.3));
            border: 2px solid rgba(255,20,147,0.4);
            color: #fff;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .page-arrow:hover {
            background: linear-gradient(145deg, #ff1493, #c44569);
            transform: scale(1.15);
            box-shadow: 0 0 20px rgba(255,20,147,0.5);
        }

        .page-arrow:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none;
        }

        .page-arrow:disabled:hover {
            background: linear-gradient(145deg, rgba(255,20,147,0.3), rgba(196,69,105,0.3));
            box-shadow: none;
        }

        .page-label {
            color: rgba(255,255,255,0.7);
            font-size: 0.75rem;
            font-weight: 600;
            min-width: 40px;
            text-align: center;
        }

        /* ========== MUSIC CONTROL BUTTON ========== */
        .music-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(145deg, #ff6b9d, #c44569);
            border: none;
            cursor: pointer;
            z-index: 999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .music-btn:hover {
            transform: scale(1.1);
        }

        .music-btn.playing {
            animation: pulse 1s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* ========== SECTIONS / PAGES ========== */
        .pages-wrapper {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            z-index: 2;
        }

        section {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            padding: 40px 20px 100px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transform: translateX(80px);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            overflow-x: hidden;
            z-index: 2;
        }

        section.active-page {
            opacity: 1;
            visibility: visible;
            transform: translateX(0);
        }

        section.exit-left {
            opacity: 0;
            visibility: hidden;
            transform: translateX(-80px);
        }

        section.exit-right {
            opacity: 0;
            visibility: hidden;
            transform: translateX(80px);
        }

        /* ========== HOME SECTION ========== */
        #home {
            text-align: center;
            position: relative;
        }

        .main-title {
            font-family: 'Dancing Script', cursive;
            font-size: 5rem;
            margin-bottom: 20px;
            animation: heartbeat 1.5s ease infinite;
            background: linear-gradient(45deg, #ff1493, #ff6b9d, #ff99cc, #ff6b9d, #ff1493);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: heartbeat 1.5s ease infinite, gradientText 3s ease infinite;
            filter: drop-shadow(0 0 30px rgba(255,20,147,0.5));
        }

        @keyframes gradientText {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.05); }
            50% { transform: scale(1); }
            75% { transform: scale(1.05); }
        }

        .subtitle {
            font-size: 1.8rem;
            opacity: 0.9;
            margin-bottom: 40px;
            animation: fadeInUp 1s ease 0.5s both;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 0.9; transform: translateY(0); }
        }

        /* ========== SHAYARI SECTION ========== */
        .shayari-container {
            max-width: 800px;
            margin: 40px auto;
        }

        .shayari-card {
            background: linear-gradient(145deg, rgba(255,20,147,0.15), rgba(0,0,0,0.3));
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 35px;
            margin: 25px 0;
            text-align: center;
            border: 1px solid rgba(255,20,147,0.3);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .shayari-card::before {
            content: '‚ù§Ô∏è';
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 80px;
            opacity: 0.1;
        }

        .shayari-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 50px rgba(255,20,147,0.3);
            border-color: rgba(255,20,147,0.6);
        }

        .shayari-text {
            font-size: 1.4rem;
            line-height: 2.2;
            font-style: italic;
            position: relative;
            z-index: 1;
        }

        /* ========== GIF SECTION ========== */
        .gif-container {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 40px 0;
        }

        .gif-box {
            width: 200px;
            height: 200px;
            background: linear-gradient(145deg, rgba(255,20,147,0.2), rgba(255,107,157,0.1));
            border: 2px solid rgba(255,20,147,0.3);
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            animation: bounce 2s ease infinite, glowBox 3s ease-in-out infinite;
            box-shadow: 0 10px 40px rgba(255,20,147,0.3);
            position: relative;
            overflow: hidden;
        }

        .gif-box::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shimmer 3s infinite;
        }

        @keyframes glowBox {
            0%, 100% { box-shadow: 0 10px 40px rgba(255,20,147,0.3); }
            50% { box-shadow: 0 15px 60px rgba(255,20,147,0.5); }
        }

        .gif-box:nth-child(2) {
            animation-delay: 0.5s;
        }

        .gif-box:nth-child(3) {
            animation-delay: 1s;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        /* ========== LOVE COUNTER ========== */
        .love-counter {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(20px);
            padding: 40px 60px;
            border-radius: 30px;
            margin: 40px 0;
            text-align: center;
            border: 1px solid rgba(255,20,147,0.3);
            position: relative;
        }

        .counter-title {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: #ff6b9d;
        }

        .counter-display {
            display: flex;
            gap: 25px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .counter-item {
            background: linear-gradient(145deg, rgba(255,20,147,0.2), rgba(255,107,157,0.1));
            padding: 20px 30px;
            border-radius: 20px;
            min-width: 100px;
            border: 1px solid rgba(255,20,147,0.3);
            transition: all 0.3s ease;
        }

        .counter-item:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255,20,147,0.5);
        }

        .counter-number {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff1493, #ff6b9d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .counter-label {
            font-size: 1rem;
            opacity: 0.9;
            margin-top: 5px;
        }

        /* ========== SHAYARI GENERATOR SECTION ========== */
        #generator {
            text-align: center;
        }

        .section-title {
            font-family: 'Dancing Script', cursive;
            font-size: 3rem;
            margin-bottom: 30px;
        }

        .generator-box {
            background: linear-gradient(145deg, rgba(0,0,0,0.4), rgba(255,20,147,0.1));
            backdrop-filter: blur(20px);
            padding: 50px;
            border-radius: 35px;
            max-width: 650px;
            width: 100%;
            border: 1px solid rgba(255,20,147,0.3);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .input-group {
            margin-bottom: 30px;
        }

        .name-input {
            width: 100%;
            padding: 22px 30px;
            border: 2px solid rgba(255,20,147,0.3);
            border-radius: 50px;
            font-size: 1.3rem;
            background: rgba(0,0,0,0.3);
            color: #fff;
            text-align: center;
            outline: none;
            transition: all 0.3s ease;
        }

        .name-input::placeholder {
            color: rgba(255,107,157,0.7);
        }

        .name-input:focus {
            box-shadow: 0 0 30px rgba(255,20,147,0.5);
            border-color: #ff1493;
            transform: scale(1.02);
        }

        .generate-btn {
            background: linear-gradient(145deg, #ff1493, #ff6b9d, #c44569);
            background-size: 200% 200%;
            border: none;
            padding: 22px 50px;
            font-size: 1.3rem;
            color: #fff;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 10px 30px rgba(255,20,147,0.4);
            animation: gradientBtn 3s ease infinite;
        }

        @keyframes gradientBtn {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .generate-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255,20,147,0.6);
        }

        .generated-shayari {
            margin-top: 35px;
            padding: 30px;
            background: linear-gradient(145deg, rgba(255,20,147,0.1), rgba(0,0,0,0.3));
            border-radius: 25px;
            min-height: 100px;
            display: none;
            border: 1px solid rgba(255,20,147,0.3);
        }

        .generated-text {
            font-size: 1.5rem;
            line-height: 2.2;
            font-style: italic;
        }

        /* Typing cursor animation */
        .typing-cursor {
            animation: blink 0.7s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* ========== PROPOSAL SECTION ========== */
        #proposal {
            text-align: center;
        }

        .proposal-question {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            margin-bottom: 50px;
            animation: glowText 2s ease-in-out infinite;
        }

        @keyframes glowText {
            0%, 100% { 
                text-shadow: 0 0 10px #ff6b9d, 0 0 20px #ff6b9d, 0 0 30px #ff1493;
            }
            50% { 
                text-shadow: 0 0 20px #ff6b9d, 0 0 40px #ff6b9d, 0 0 60px #ff1493;
            }
        }

        .button-container {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
            position: relative;
            min-height: 100px;
        }

        .proposal-btn {
            padding: 25px 60px;
            font-size: 1.6rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .proposal-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s ease;
        }

        .proposal-btn:hover::before {
            left: 100%;
        }

        .yes-btn {
            background: linear-gradient(145deg, #00ff88, #00d673, #00b894);
            background-size: 200% 200%;
            color: #fff;
            box-shadow: 0 5px 30px rgba(0, 255, 136, 0.5);
            animation: yesGlow 2s ease-in-out infinite;
        }

        @keyframes yesGlow {
            0%, 100% { 
                box-shadow: 0 5px 30px rgba(0, 255, 136, 0.5);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 10px 50px rgba(0, 255, 136, 0.7);
                transform: scale(1.05);
            }
        }

        .yes-btn:hover {
            transform: scale(1.15) !important;
            box-shadow: 0 15px 60px rgba(0, 255, 136, 0.8) !important;
        }

        .no-btn {
            background: linear-gradient(145deg, #636e72, #2d3436);
            color: #fff;
            position: relative;
        }

        .no-btn:hover {
            background: linear-gradient(145deg, #d63031, #e84118);
        }

        .try-again-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 30px 50px;
            border-radius: 20px;
            font-size: 2rem;
            z-index: 2000;
            display: none;
            animation: popIn 0.3s ease;
        }

        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        /* ========== CELEBRATION OVERLAY ========== */
        .celebration-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a0a14 0%, #2d0a1f 50%, #3d0f2a 100%);
            z-index: 3000;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 10px;
            overflow: hidden;
        }

        .celebration-big-heart {
            font-size: 150px;
            opacity: 0;
            transform: scale(0);
            filter: drop-shadow(0 0 40px rgba(255,20,147,0.6)) drop-shadow(0 0 80px rgba(255,20,147,0.3));
            position: relative;
        }

        .celebration-big-heart.animate {
            animation: heartGrow 1s cubic-bezier(0.17, 0.89, 0.32, 1.3) forwards;
        }

        @keyframes heartGrow {
            0% { opacity: 0; transform: scale(0) rotate(-10deg); }
            50% { opacity: 1; }
            100% { opacity: 1; transform: scale(1) rotate(0deg); }
        }

        .celebration-big-heart::after {
            content: '';
            position: absolute;
            inset: -20px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,20,147,0.2) 0%, transparent 70%);
            animation: heartGlow 2s ease-in-out infinite;
        }

        @keyframes heartGlow {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.3); opacity: 0.8; }
        }

        .celebration-big-heart.beating {
            opacity: 1;
            transform: scale(1);
            animation: heartBeat 0.8s ease-in-out infinite;
        }

        @keyframes heartBeat {
            0% { transform: scale(1); }
            15% { transform: scale(1.15); }
            30% { transform: scale(1); }
            45% { transform: scale(1.1); }
            60% { transform: scale(1); }
        }

        .celebration-knew-it {
            font-family: 'Dancing Script', cursive;
            font-size: 3rem;
            text-align: center;
            opacity: 0;
            transform: scale(0.3) rotate(-10deg);
            color: #ffcc00;
            text-shadow: 0 0 20px rgba(255,204,0,0.6), 0 0 40px rgba(255,204,0,0.3);
        }

        .celebration-knew-it.animate {
            animation: knewItPop 0.8s cubic-bezier(0.17, 0.89, 0.32, 1.3) forwards;
        }

        @keyframes knewItPop {
            to { opacity: 1; transform: scale(1) rotate(0deg); }
        }

        .celebration-crackers {
            font-size: 3rem;
            text-align: center;
            letter-spacing: 15px;
            opacity: 0;
            transform: scale(0.5);
            filter: drop-shadow(0 0 15px rgba(255,204,0,0.5));
        }

        .celebration-crackers.animate {
            animation: crackerBurst 1s ease forwards;
        }

        @keyframes crackerBurst {
            0% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.3); }
            100% { opacity: 1; transform: scale(1); }
        }

        .celebration-love-text {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            text-align: center;
            opacity: 0;
            transform: translateY(30px);
            background: linear-gradient(45deg, #ff1493, #ff6b9d, #ffcc00, #ff6b9d, #ff1493);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 20px rgba(255,20,147,0.4));
        }

        .celebration-love-text.animate {
            animation: loveFadeIn 1s ease forwards, rainbowText 3s linear 1s infinite;
        }

        @keyframes loveFadeIn {
            to { opacity: 1; transform: translateY(0); }
        }

        .celebration-text {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            padding: 10px 20px;
            background: linear-gradient(45deg, #ff1493, #ff6b9d, #ffcc00, #00ff88, #ff6b9d, #ff1493);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .celebration-text.animate {
            animation: loveFadeIn 1s ease forwards, rainbowText 3s linear 1s infinite;
        }

        .celebration-mini-hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .celebration-mini-hearts span {
            position: absolute;
            font-size: 24px;
            animation: floatCelebHeart 4s ease-in-out infinite;
            opacity: 0;
        }

        @keyframes floatCelebHeart {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-50px) scale(1.5); opacity: 0; }
        }

        /* ========== CONFETTI CANVAS ========== */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3001;
        }

        /* ========== HEART BURST EFFECT ========== */
        .heart-burst {
            position: fixed;
            pointer-events: none;
            font-size: 20px;
            animation: burstOut 1s ease-out forwards;
            z-index: 100;
        }

        @keyframes burstOut {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: scale(2) rotate(180deg) translateY(-50px);
                opacity: 0;
            }
        }

        /* ========== RESPONSIVE DESIGN ========== */
        @media (max-width: 768px) {
            .main-title {
                font-size: 3rem;
            }

            .page-nav {
                padding: 8px 16px;
                gap: 8px;
                bottom: 15px;
            }

            .page-dot {
                width: 10px;
                height: 10px;
            }

            .page-arrow {
                width: 36px;
                height: 36px;
                font-size: 14px;
            }

            .page-label {
                font-size: 0.65rem;
            }

            .shayari-text {
                font-size: 1.1rem;
            }

            .proposal-question {
                font-size: 2rem;
            }

            .proposal-btn {
                padding: 15px 35px;
                font-size: 1.2rem;
            }

            .celebration-text {
                font-size: 2.5rem;
            }

            .gif-box {
                width: 150px;
                height: 150px;
                font-size: 60px;
            }

            .counter-display {
                gap: 10px;
            }

            .counter-item {
                padding: 10px 15px;
                min-width: 60px;
            }

            .counter-number {
                font-size: 1.5rem;
            }

            .heart-3d {
                width: 100px;
                height: 100px;
            }

            .heart-3d::before,
            .heart-3d::after {
                width: 50px;
                height: 80px;
                border-radius: 50px 50px 0 0;
            }

            .envelope {
                width: 250px;
                height: 170px;
            }

            .letter-small {
                width: 220px;
                height: 100px;
            }

            .letter-reveal {
                padding: 30px 25px;
            }

            .letter-text {
                font-size: 1.1rem;
            }

            .memory-card {
                min-width: 240px;
                height: 300px;
            }

            .section-title {
                font-size: 2rem;
            }

            .timeline-item:nth-child(odd),
            .timeline-item:nth-child(even) {
                padding-left: 50px;
                padding-right: 10px;
                text-align: left;
            }

            .timeline::before {
                left: 20px;
            }

            .timeline-dot {
                left: 20px;
            }

            .quiz-container {
                padding: 25px;
            }
        }

        @media (max-width: 480px) {
            .main-title {
                font-size: 2.2rem;
            }

            .section-title {
                font-size: 1.6rem;
            }

            .generator-box {
                padding: 25px;
            }

            .celebration-text {
                font-size: 2rem;
            }
        }

        /* ========== LOADING OVERLAY (for cloud fetch) ========== */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, #2d0a1f 0%, #1a0a14 100%);
            z-index: 99999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.6s ease;
        }

        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-heart {
            font-size: 60px;
            animation: heartbeat 1s ease infinite;
        }

        .loading-text {
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
            color: #ff6b9d;
            margin-top: 20px;
            animation: fadeInUp 1s ease both;
        }
    </style>
</head>
<body>

    <!-- ============================================ -->
    <!-- LOADING OVERLAY (shown while fetching cloud data) -->
    <!-- ============================================ -->
    <div class="loading-overlay" id="loadingOverlay" style="display:none;">
        <div class="loading-heart">üíñ</div>
        <p class="loading-text">Loading your surprise...</p>
    </div>

    <!-- ============================================ -->
    <!-- EDIT/SETUP PANEL (shown first) -->
    <!-- ============================================ -->
    <div class="edit-panel" id="editPanel">
        <div class="edit-panel-content">
            <h2 class="edit-panel-title">üíï Create Your Valentine Page üíï</h2>
            <p class="edit-panel-subtitle">Customize everything, then share the magic link with your special someone!</p>

            <div class="edit-group">
                <label>üíï Your Name</label>
                <input type="text" class="edit-input" id="editSenderName" placeholder="Your name..." maxlength="30">
            </div>

            <div class="edit-group">
                <label>üíñ Their Name (Partner's Name)</label>
                <input type="text" class="edit-input" id="editPartnerName" placeholder="Their name..." maxlength="30">
            </div>

            <div class="edit-group">
                <label>üìÖ The Date You First Met</label>
                <input type="date" class="edit-input" id="editMeetDate" value="2023-02-14">
            </div>

            <div class="edit-group">
                <label>üíå Love Letter Message</label>
                <textarea class="edit-textarea" id="editLetterMsg" rows="3" placeholder="Write your love letter...">Every moment with you feels like magic. You are the reason I believe in love. My heart beats for you, and only you. Forever yours... ‚ù§Ô∏è</textarea>
            </div>

            <div class="edit-group">
                <label>üì∏ Upload Your Photos (up to 5)</label>
                <div class="photo-upload-grid" id="photoUploadGrid">
                    <div class="photo-upload-card" data-index="0">
                        <span class="upload-icon">üì∑</span>
                        <span class="upload-text">Add Photo</span>
                        <button class="remove-photo" title="Remove">&times;</button>
                        <input type="text" class="photo-caption-input" placeholder="Caption..." data-index="0">
                        <input type="file" accept="image/*" style="display:none" data-index="0">
                    </div>
                    <div class="photo-upload-card" data-index="1">
                        <span class="upload-icon">üì∑</span>
                        <span class="upload-text">Add Photo</span>
                        <button class="remove-photo" title="Remove">&times;</button>
                        <input type="text" class="photo-caption-input" placeholder="Caption..." data-index="1">
                        <input type="file" accept="image/*" style="display:none" data-index="1">
                    </div>
                    <div class="photo-upload-card" data-index="2">
                        <span class="upload-icon">üì∑</span>
                        <span class="upload-text">Add Photo</span>
                        <button class="remove-photo" title="Remove">&times;</button>
                        <input type="text" class="photo-caption-input" placeholder="Caption..." data-index="2">
                        <input type="file" accept="image/*" style="display:none" data-index="2">
                    </div>
                    <div class="photo-upload-card" data-index="3">
                        <span class="upload-icon">üì∑</span>
                        <span class="upload-text">Add Photo</span>
                        <button class="remove-photo" title="Remove">&times;</button>
                        <input type="text" class="photo-caption-input" placeholder="Caption..." data-index="3">
                        <input type="file" accept="image/*" style="display:none" data-index="3">
                    </div>
                    <div class="photo-upload-card" data-index="4">
                        <span class="upload-icon">üì∑</span>
                        <span class="upload-text">Add Photo</span>
                        <button class="remove-photo" title="Remove">&times;</button>
                        <input type="text" class="photo-caption-input" placeholder="Caption..." data-index="4">
                        <input type="file" accept="image/*" style="display:none" data-index="4">
                    </div>
                </div>
            </div>

            <button class="launch-btn" id="launchBtn">üöÄ Create & Preview Valentine üíï</button>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- SHARE MODAL -->
    <!-- ============================================ -->
    <div class="share-modal" id="shareModal">
        <div class="share-modal-content">
            <h3 class="share-modal-title">üíå Share With Your Love üíå</h3>
            <p style="opacity:0.8; margin-bottom:15px;">Copy the link below and send it to your special someone!</p>
            <div class="share-link-box">
                <input type="text" class="share-link-input" id="shareLinkInput" readonly>
                <button class="copy-btn" id="copyLinkBtn">üìã Copy</button>
            </div>
            <p id="copyStatus" style="color:#00ff88; font-size:0.9rem; min-height:20px;"></p>
            <div class="share-buttons">
                <button class="share-social-btn share-whatsapp" id="shareWhatsapp">üí¨ WhatsApp</button>
                <button class="share-social-btn share-telegram" id="shareTelegram">‚úàÔ∏è Telegram</button>
            </div>
            <button class="share-close" id="shareClose">Close</button>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- SHARE BUTTON (floating) -->
    <!-- ============================================ -->
    <button class="share-btn" id="shareBtn" title="Share">üì§</button>

    <!-- ============================================ -->
    <!-- EDIT MODE BUTTON (floating) -->
    <!-- ============================================ -->
    <button class="edit-mode-btn" id="editModeBtn" title="Edit">‚úèÔ∏è</button>

    <!-- ============================================ -->
    <!-- STARFIELD BACKGROUND -->
    <!-- ============================================ -->
    <div class="starfield" id="starfield"></div>

    <!-- ============================================ -->
    <!-- CUSTOM CURSOR -->
    <!-- ============================================ -->
    <div class="custom-cursor" id="customCursor">üíñ</div>

    <!-- ============================================ -->
    <!-- FLOATING HEARTS BACKGROUND -->
    <!-- ============================================ -->
    <div class="floating-hearts" id="floatingHearts"></div>

    <!-- ============================================ -->
    <!-- PAGE NAVIGATION (DOTS + ARROWS) -->
    <!-- ============================================ -->
    <div class="page-nav" id="pageNav">
        <button class="page-arrow" id="prevPage" title="Previous">&#10094;</button>
        <span class="page-label" id="pageLabel">1 / 7</span>
        <div class="page-dot active" data-page="0"></div>
        <div class="page-dot" data-page="1"></div>
        <div class="page-dot" data-page="2"></div>
        <div class="page-dot" data-page="3"></div>
        <div class="page-dot" data-page="4"></div>
        <div class="page-dot" data-page="5"></div>
        <div class="page-dot" data-page="6"></div>
        <button class="page-arrow" id="nextPage" title="Next">&#10095;</button>
    </div>

    <!-- ============================================ -->
    <!-- MUSIC CONTROL BUTTON -->
    <!-- ============================================ -->
    <button class="music-btn" id="musicBtn" title="Toggle Music">üéµ</button>

    <!-- ============================================ -->
    <!-- PAGES WRAPPER -->
    <!-- ============================================ -->
    <div class="pages-wrapper" id="pagesWrapper">

    <!-- ============================================ -->
    <!-- HOME SECTION (PAGE 1) -->
    <!-- ============================================ -->
    <section id="home" class="active-page" data-page="0">
        <h1 class="main-title neon-text">Happy Valentine's Day ‚ù§Ô∏è</h1>
        <p class="subtitle">For My Special Someone üíï</p>

        <!-- 3D Rotating Heart -->
        <div class="heart-3d-container">
            <div class="heart-3d"></div>
        </div>

        <!-- Animated GIF Boxes (Using Emojis as Visual Elements) -->
        <div class="gif-container">
            <div class="gif-box">üíë</div>
            <div class="gif-box">üíñ</div>
            <div class="gif-box">üíò</div>
        </div>

        <!-- Love Counter Timer -->
        <div class="love-counter glow-border">
            <h3 class="counter-title">Time Since We Met üíï</h3>
            <div class="counter-display">
                <div class="counter-item">
                    <div class="counter-number" id="days">000</div>
                    <div class="counter-label">Days</div>
                </div>
                <div class="counter-item">
                    <div class="counter-number" id="hours">00</div>
                    <div class="counter-label">Hours</div>
                </div>
                <div class="counter-item">
                    <div class="counter-number" id="minutes">00</div>
                    <div class="counter-label">Minutes</div>
                </div>
                <div class="counter-item">
                    <div class="counter-number" id="seconds">00</div>
                    <div class="counter-label">Seconds</div>
                </div>
            </div>
        </div>
    </section>

    <!-- ============================================ -->
    <!-- LOVE LETTER SECTION (PAGE 2) -->
    <!-- ============================================ -->
    <section id="love-letter" data-page="1">
        <h2 class="section-title neon-text">üíå A Letter For You üíå</h2>
        <p style="margin-bottom: 20px; opacity: 0.8;" id="envelopeHint">Tap the envelope to read your letter...</p>
        
        <div class="envelope-container" id="envelopeContainer">
            <div class="envelope" id="envelope">
                <div class="envelope-flap"></div>
                <div class="envelope-seal">‚ù§Ô∏è</div>
                <div class="envelope-body">
                    <div class="letter-small">
                        <p class="letter-small-text">
                            A secret letter awaits...
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Full letter revealed after envelope click -->
        <div class="letter-reveal" id="letterReveal">
            <div class="letter-greeting" id="letterGreeting">My Dearest Love,</div>
            <p class="letter-text" id="letterText">
                Every moment with you feels like magic. You are the reason I believe in love. My heart beats for you, and only you. Forever yours... ‚ù§Ô∏è
            </p>
            <div class="letter-signature" id="letterSignature">~ With all my love ‚ù§Ô∏è</div>
            <div class="letter-hearts">üíï üíñ üíï</div>
        </div>
    </section>

    <!-- ============================================ -->
    <!-- MEMORIES SECTION -->
    <!-- ============================================ -->
    <section id="memories" class="memory-section" data-page="2">
        <h2 class="section-title neon-text">üì∏ Our Beautiful Memories üì∏</h2>
        
        <div class="memory-carousel">
            <div class="memory-card">
                <div class="memory-placeholder">üíï</div>
                <p class="memory-date">‚ú® First Meeting</p>
                <p class="memory-caption">"The day everything changed..."</p>
            </div>
            <div class="memory-card">
                <div class="memory-placeholder">ü•∞</div>
                <p class="memory-date">üíñ First Date</p>
                <p class="memory-caption">"Magic in the air..."</p>
            </div>
            <div class="memory-card">
                <div class="memory-placeholder">üíë</div>
                <p class="memory-date">üåπ Special Moment</p>
                <p class="memory-caption">"Forever in my heart..."</p>
            </div>
            <div class="memory-card">
                <div class="memory-placeholder">‚ú®</div>
                <p class="memory-date">üí´ Our Adventure</p>
                <p class="memory-caption">"Together is my favorite place..."</p>
            </div>
            <div class="memory-card">
                <div class="memory-placeholder">üåü</div>
                <p class="memory-date">üíù Today</p>
                <p class="memory-caption">"Still falling for you..."</p>
            </div>
        </div>
    </section>

    <!-- ============================================ -->
    <!-- TIMELINE SECTION -->
    <!-- ============================================ -->
    <section id="timeline" class="timeline-section" data-page="3">
        <h2 class="section-title neon-text">üíï Our Love Story üíï</h2>
        
        <div class="timeline">
            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <p class="timeline-date">üåü The Beginning</p>
                    <h4 class="timeline-title">When We First Met</h4>
                    <p>That magical moment when our eyes first met...</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <p class="timeline-date">üíñ First Spark</p>
                    <h4 class="timeline-title">Falling In Love</h4>
                    <p>The butterflies, the late-night talks...</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <p class="timeline-date">üéâ Our First</p>
                    <h4 class="timeline-title">Special Memories</h4>
                    <p>Every first became a beautiful memory...</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <p class="timeline-date">üíï Forever</p>
                    <h4 class="timeline-title">And Many More...</h4>
                    <p>This is just the beginning of forever...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- ============================================ -->
    <!-- LOVE QUIZ SECTION -->
    <!-- ============================================ -->
    <section id="quiz" class="quiz-section" data-page="4">
        <h2 class="section-title neon-text">üéØ Love Compatibility Quiz üéØ</h2>
        
        <div class="quiz-container glow-border">
            <div id="quizContent">
                <p class="quiz-question" id="quizQuestion">How much do you love me? üíï</p>
                <div class="quiz-options" id="quizOptions">
                    <div class="quiz-option" data-correct="false">A lot üíñ</div>
                    <div class="quiz-option" data-correct="false">Very much üíï</div>
                    <div class="quiz-option" data-correct="true">To infinity and beyond! üöÄ‚ù§Ô∏è</div>
                    <div class="quiz-option" data-correct="false">More than anything üíó</div>
                </div>
            </div>
            <div class="quiz-result" id="quizResult">
                <p class="quiz-score" id="quizScore">üíØ</p>
                <p>We are PERFECT for each other! üíï</p>
            </div>
        </div>
    </section>

    <!-- ============================================ -->
    <!-- SHAYARI SECTION (ROMANTIC POETRY) -->
    <!-- ============================================ -->
    <section id="shayari-display" data-page="5">
        <!-- Romantic Hindi Shayari Section -->
        <h2 class="section-title neon-text">üíù Romantic Shayari üíù</h2>
        <div class="shayari-container">
            <div class="shayari-card">
                <p class="shayari-text">
                    "‡§§‡•á‡§∞‡•Ä ‡§Ü‡§Å‡§ñ‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ñ‡•ã ‡§ú‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç,<br>
                    ‡§§‡•á‡§∞‡•á ‡§¶‡§ø‡§≤ ‡§Æ‡•á‡§Ç ‡§¨‡§∏ ‡§ú‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç,<br>
                    ‡§ú‡§ø‡§§‡§®‡•Ä ‡§¨‡§æ‡§∞ ‡§ß‡§°‡§º‡§ï‡•á ‡§§‡•á‡§∞‡§æ ‡§¶‡§ø‡§≤,<br>
                    ‡§â‡§§‡§®‡•Ä ‡§¨‡§æ‡§∞ ‡§§‡•Å‡§ù‡•á ‡§™‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç‡•§ üíï"
                </p>
            </div>
            <div class="shayari-card">
                <p class="shayari-text">
                    "‡§Æ‡•ã‡§π‡§¨‡•ç‡§¨‡§§ ‡§π‡•ã ‡§§‡•Å‡§Æ‡§∏‡•á ‡§ï‡•Å‡§õ ‡§á‡§∏ ‡§ï‡§¶‡§∞,<br>
                    ‡§ï‡§ø ‡§π‡§∞ ‡§™‡§≤ ‡§§‡•Å‡§Æ‡•ç‡§π‡•á‡§Ç ‡§¶‡•á‡§ñ‡§§‡•á ‡§∞‡§π‡•á‡§Ç,<br>
                    ‡§®‡§æ ‡§ú‡§æ‡§®‡•á ‡§ï‡§¨ ‡§Ü‡§Å‡§ñ‡•á‡§Ç ‡§¨‡§Ç‡§¶ ‡§π‡•ã ‡§ú‡§æ‡§è‡§Ç,<br>
                    ‡§á‡§∏‡•Ä‡§≤‡§ø‡§è ‡§§‡•Å‡§Æ‡•ç‡§π‡•á‡§Ç ‡§¶‡•á‡§ñ‡§§‡•á ‡§∞‡§π‡•á‡§Ç‡•§ ‚ù§Ô∏è"
                </p>
            </div>
            <div class="shayari-card">
                <p class="shayari-text">
                    "‡§¶‡§ø‡§≤ ‡§Æ‡•á‡§Ç ‡§¨‡§∏‡§æ ‡§≤‡§ø‡§Ø‡§æ ‡§§‡•Å‡§Æ‡•ç‡§π‡•á‡§Ç,<br>
                    ‡§Ö‡§¨ ‡§®‡§ø‡§ï‡§≤‡§®‡§æ ‡§Æ‡•Å‡§∂‡•ç‡§ï‡§ø‡§≤ ‡§π‡•à,<br>
                    ‡§á‡§∂‡•ç‡§ï‡§º ‡§Æ‡•á‡§Ç ‡§§‡•á‡§∞‡•á ‡§°‡•Ç‡§¨ ‡§ó‡§è ‡§π‡§Æ,<br>
                    ‡§Ö‡§¨ ‡§â‡§≠‡§∞‡§®‡§æ ‡§Æ‡•Å‡§∂‡•ç‡§ï‡§ø‡§≤ ‡§π‡•à‡•§ üíñ"
                </p>
            </div>
            <div class="shayari-card">
                <p class="shayari-text">
                    "‡§§‡•Å‡§Æ ‡§Æ‡§ø‡§≤‡•á ‡§§‡•ã ‡§≤‡§ó‡§æ ‡§ú‡•à‡§∏‡•á,<br>
                    ‡§ú‡§º‡§ø‡§®‡•ç‡§¶‡§ó‡•Ä ‡§Æ‡•Å‡§∏‡•ç‡§ï‡•Å‡§∞‡§æ‡§à ‡§π‡•à,<br>
                    ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§∞‡•á ‡§∏‡§æ‡§• ‡§π‡•ã ‡§ú‡•ã ‡§™‡§≤,<br>
                    ‡§µ‡•ã ‡§ú‡§®‡•ç‡§®‡§§ ‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§ú‡§ó‡§π ‡§™‡§æ‡§à ‡§π‡•à‡•§ üåπ"
                </p>
            </div>
        </div>

        <!-- Shayari Generator (merged here) -->
        <div class="generator-box glow-border" style="margin-top: 30px;">
            <div class="input-group">
                <input type="text" class="name-input" id="nameInput" placeholder="Enter Her Name üíï" maxlength="30">
            </div>
            <button class="generate-btn" id="generateBtn">Generate Special Shayari üíù</button>
            
            <div class="generated-shayari" id="generatedShayari">
                <p class="generated-text" id="generatedText"></p>
            </div>
        </div>
    </section>

    <!-- ============================================ -->
    <!-- PROPOSAL SECTION -->
    <!-- ============================================ -->
    <section id="proposal" data-page="6">
        <h2 class="proposal-question neon-text">Will You Be My Valentine? ‚ù§Ô∏è</h2>
        
        <div class="button-container" id="buttonContainer">
            <button class="proposal-btn yes-btn" id="yesBtn">YES üíñ</button>
            <button class="proposal-btn no-btn" id="noBtn">NO üò¢</button>
        </div>
    </section>

    </div> <!-- END pages-wrapper -->

    <!-- ============================================ -->
    <!-- TRY AGAIN MESSAGE -->
    <!-- ============================================ -->
    <div class="try-again-message" id="tryAgainMessage">Try Again üòú</div>

    <!-- ============================================ -->
    <!-- CELEBRATION OVERLAY -->
    <!-- ============================================ -->
    <div class="celebration-overlay" id="celebrationOverlay">
        <div class="celebration-mini-hearts" id="celebMiniHearts"></div>
        <div class="celebration-crackers">üéÜüéáüéÜüéáüéÜ</div>
        <h2 class="celebration-knew-it">I Knew It! üéâ</h2>
        <div class="celebration-big-heart" id="celebBigHeart">‚ù§Ô∏è</div>
        <h1 class="celebration-love-text">Love You Sooo Much üíï</h1>
        <h2 class="celebration-text">You Are Mine Forever ‚ù§Ô∏è</h2>
        <div class="celebration-crackers bottom-crackers">üéáüéÜüéáüéÜüéá</div>
    </div>

    <!-- ============================================ -->
    <!-- CONFETTI CANVAS -->
    <!-- ============================================ -->
    <canvas id="confetti-canvas"></canvas>

    <!-- ============================================ -->
    <!-- FIREWORKS CANVAS -->
    <!-- ============================================ -->
    <canvas id="fireworks-canvas"></canvas>

    <!-- ============================================ -->
    <!-- BACKGROUND MUSIC (Using Web Audio API for a romantic tone) -->
    <!-- ============================================ -->
    <audio id="backgroundMusic" loop>
        <source src="humsafar.mp3" type="audio/mpeg">
    </audio>

    <!-- ============================================ -->
    <!-- JAVASCRIPT -->
    <!-- ============================================ -->
    <script>
        // ============================================
        // FLOATING HEARTS GENERATOR
        // Creates floating hearts in the background
        // ============================================
        function createFloatingHearts() {
            const container = document.getElementById('floatingHearts');
            const hearts = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíì', 'üíò', 'üíù', 'üíû', 'üåπ', '‚ú®'];
            
            // Create 20 initial hearts
            for (let i = 0; i < 20; i++) {
                setTimeout(() => createHeart(container, hearts), i * 500);
            }
            
            // Continuously create new hearts
            setInterval(() => createHeart(container, hearts), 1000);
        }

        function createHeart(container, hearts) {
            const heart = document.createElement('span');
            heart.className = 'heart';
            heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
            heart.style.left = Math.random() * 100 + '%';
            heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
            heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
            container.appendChild(heart);
            
            // Remove heart after animation completes
            setTimeout(() => heart.remove(), 10000);
        }

        // ============================================
        // LOVE COUNTER TIMER
        // Counts time since a specific date
        // ============================================
        // Global editable data
        let valentineData = {
            senderName: '',
            partnerName: '',
            meetDate: '2023-02-14',
            letterMsg: 'Every moment with you feels like magic. You are the reason I believe in love. My heart beats for you, and only you. Forever yours... ‚ù§Ô∏è',
            photos: [null, null, null, null, null],
            captions: ['', '', '', '', '']
        };

        let isViewMode = false;

        function updateLoveCounter() {
            const meetDate = new Date(valentineData.meetDate + 'T00:00:00');
            const now = new Date();
            const diff = now - meetDate;

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('days').textContent = String(days).padStart(3, '0');
            document.getElementById('hours').textContent = String(hours).padStart(2, '0');
            document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
            document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
        }

        // ============================================
        // SHAYARI GENERATOR
        // Creates personalized romantic shayari
        // ============================================
        const shayariTemplates = [
            "{name} ‡§§‡•Ç ‡§π‡•à ‡§Æ‡•á‡§∞‡•Ä ‡§ú‡§æ‡§®,\n‡§Æ‡•á‡§∞‡•Ä ‡§ß‡§°‡§º‡§ï‡§®, ‡§Æ‡•á‡§∞‡•Ä ‡§™‡§π‡§ö‡§æ‡§®,\n‡§§‡•á‡§∞‡•á ‡§¨‡§ø‡§®‡§æ ‡§π‡•à ‡§¨‡•á‡§ï‡§æ‡§∞ ‡§Ø‡•á ‡§ú‡§π‡§æ‡§®,\n‡§§‡•Ç ‡§π‡•Ä ‡§π‡•à ‡§Æ‡•á‡§∞‡§æ ‡§™‡•ç‡§Ø‡§æ‡§∞, ‡§Æ‡•á‡§∞‡§æ ‡§à‡§Æ‡§æ‡§®‡•§ üíï",
            
            "‡§ö‡§æ‡§Å‡§¶ ‡§∏‡§ø‡§§‡§æ‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§≠‡•Ä ‡§ï‡§π‡§æ‡§Å ‡§µ‡•ã ‡§¨‡§æ‡§§,\n‡§ú‡•ã ‡§π‡•à {name} ‡§§‡•á‡§∞‡•Ä ‡§Æ‡•Å‡§∏‡•ç‡§ï‡§æ‡§® ‡§Æ‡•á‡§Ç,\n‡§¨‡§∏ ‡§§‡•á‡§∞‡•á ‡§∏‡§æ‡§• ‡§ó‡•Å‡§ú‡§º‡§æ‡§∞‡§®‡•Ä ‡§π‡•à ‡§ú‡§º‡§ø‡§®‡•ç‡§¶‡§ó‡•Ä,\n‡§§‡•á‡§∞‡•á ‡§π‡§æ‡§•‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§π‡§æ‡§•, ‡§§‡•á‡§∞‡•Ä ‡§¨‡§æ‡§π‡•ã‡§Ç ‡§Æ‡•á‡§Ç‡•§ ‚ù§Ô∏è",
            
            "{name} ‡§ï‡•á ‡§¨‡§ø‡§®‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à ‡§Ø‡•á ‡§¶‡§ø‡§≤,\n‡§§‡•á‡§∞‡•á ‡§¨‡§ø‡§®‡§æ ‡§§‡•ã ‡§π‡•à ‡§Ø‡•á ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§®‡•Ä‡§≤,\n‡§§‡•Ç ‡§π‡•à ‡§§‡•ã ‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§π‡•à ‡§Æ‡•á‡§∞‡•á ‡§™‡§æ‡§∏,\n‡§§‡•Ç ‡§π‡•à ‡§Æ‡•á‡§∞‡•Ä ‡§π‡§∞ ‡§ñ‡§º‡•Å‡§∂‡•Ä ‡§ï‡§æ ‡§è‡§π‡§∏‡§æ‡§∏‡•§ üíñ",
            
            "‡§∏‡•ã‡§ö‡§æ ‡§•‡§æ ‡§™‡•ç‡§Ø‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§ï‡§≠‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§™‡§°‡§º‡•á‡§Ç‡§ó‡•á,\n‡§™‡§∞ {name} ‡§∏‡•á ‡§Æ‡§ø‡§≤‡•á ‡§î‡§∞ ‡§¨‡§¶‡§≤ ‡§ó‡§è,\n‡§Ö‡§¨ ‡§§‡•ã ‡§¨‡§∏ ‡§è‡§ï ‡§π‡•Ä ‡§ñ‡§º‡•ç‡§µ‡§æ‡§π‡§ø‡§∂ ‡§π‡•à,\n{name} ‡§π‡§Æ‡•á‡§∂‡§æ ‡§∏‡§æ‡§• ‡§∞‡§π‡•á‡•§ üåπ",
            
            "{name} ‡§π‡•à ‡§®‡§æ‡§Æ ‡§§‡•á‡§∞‡§æ,\n‡§ú‡•à‡§∏‡•á ‡§∂‡§π‡§¶ ‡§Æ‡•á‡§Ç ‡§Æ‡§ø‡§†‡§æ‡§∏,\n‡§§‡•á‡§∞‡•á ‡§¨‡§ø‡§®‡§æ ‡§Ö‡§ß‡•Ç‡§∞‡§æ ‡§π‡•à ‡§∏‡§¨ ‡§ï‡•Å‡§õ,\n‡§§‡•Ç ‡§π‡•à ‡§Æ‡•á‡§∞‡•Ä ‡§π‡§∞ ‡§∏‡§æ‡§Å‡§∏‡•§ üíó",
            
            "‡§¶‡•Å‡§®‡§ø‡§Ø‡§æ ‡§ï‡•Ä ‡§∏‡§æ‡§∞‡•Ä ‡§ñ‡•Å‡§∂‡§ø‡§Ø‡§æ‡§Å ‡§Æ‡§ø‡§≤ ‡§ú‡§æ‡§è‡§Ç,\n‡§´‡§ø‡§∞ ‡§≠‡•Ä {name} ‡§§‡•á‡§∞‡§æ ‡§∏‡§æ‡§• ‡§ö‡§æ‡§π‡§ø‡§è,\n‡§§‡•Ç ‡§π‡•à ‡§Æ‡•á‡§∞‡•Ä ‡§ú‡§®‡•ç‡§®‡§§, ‡§§‡•Ç ‡§π‡•à ‡§Æ‡•á‡§∞‡§æ ‡§ú‡§π‡§æ‡§®,\n‡§¨‡§∏ ‡§§‡•á‡§∞‡§æ ‡§™‡•ç‡§Ø‡§æ‡§∞ ‡§î‡§∞ ‡§§‡•á‡§∞‡•Ä ‡§Æ‡•Å‡§∏‡•ç‡§ï‡§æ‡§® ‡§ö‡§æ‡§π‡§ø‡§è‡•§ üíù"
        ];

        // Typing animation effect
        function typeText(element, text, speed = 50) {
            element.innerHTML = '';
            let index = 0;
            
            function type() {
                if (index < text.length) {
                    if (text.charAt(index) === '\n') {
                        element.innerHTML += '<br>';
                    } else {
                        element.innerHTML += text.charAt(index);
                    }
                    index++;
                    setTimeout(type, speed);
                }
            }
            
            type();
        }

        document.getElementById('generateBtn').addEventListener('click', function() {
            const name = document.getElementById('nameInput').value.trim();
            const shayariBox = document.getElementById('generatedShayari');
            const shayariText = document.getElementById('generatedText');
            
            if (!name) {
                alert('Please enter her name! üíï');
                return;
            }
            
            // Select random shayari template
            const template = shayariTemplates[Math.floor(Math.random() * shayariTemplates.length)];
            const personalizedShayari = template.replace(/{name}/g, name);
            
            // Show the shayari box
            shayariBox.style.display = 'block';
            
            // Apply typing animation
            typeText(shayariText, personalizedShayari, 40);
        });

        // ============================================
        // PROPOSAL SECTION - NO BUTTON ESCAPE
        // The NO button moves away when hovered
        // ============================================
        const noBtn = document.getElementById('noBtn');
        const buttonContainer = document.getElementById('buttonContainer');
        const tryAgainMessage = document.getElementById('tryAgainMessage');

        // Move NO button to random position on hover
        noBtn.addEventListener('mouseover', function() {
            moveNoButton();
        });

        // Also move on touch for mobile
        noBtn.addEventListener('touchstart', function(e) {
            e.preventDefault();
            moveNoButton();
        });

        function moveNoButton() {
            const containerRect = buttonContainer.getBoundingClientRect();
            const btnRect = noBtn.getBoundingClientRect();
            
            // Calculate random position within viewport
            const maxX = window.innerWidth - btnRect.width - 20;
            const maxY = window.innerHeight - btnRect.height - 20;
            
            const randomX = Math.max(20, Math.random() * maxX);
            const randomY = Math.max(100, Math.random() * maxY);
            
            noBtn.style.position = 'fixed';
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
            noBtn.style.zIndex = '999';
        }

        // Show try again message if NO is clicked
        noBtn.addEventListener('click', function() {
            tryAgainMessage.style.display = 'block';
            setTimeout(() => {
                tryAgainMessage.style.display = 'none';
            }, 1500);
        });

        // ============================================
        // YES BUTTON - CELEBRATION
        // Shows confetti and celebration message
        // ============================================
        const yesBtn = document.getElementById('yesBtn');
        const celebrationOverlay = document.getElementById('celebrationOverlay');

        yesBtn.addEventListener('click', function() {
            // Show celebration overlay
            celebrationOverlay.style.display = 'flex';
            
            // Start confetti animation
            startConfetti();
            
            // Play celebration sound (optional - add your sound file)
            playYesSound();
        });

        // ============================================
        // CONFETTI ANIMATION
        // Creates colorful confetti effect
        // ============================================
        function startConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const confettiParticles = [];
            const colors = ['#ff6b9d', '#ff85a2', '#ff9eb5', '#ffc0cb', '#ff4d7a', '#ff3366', '#ff66b2', '#ffcc00', '#ff99cc', '#ffffff'];
            
            // Create confetti particles
            for (let i = 0; i < 300; i++) {
                confettiParticles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    size: Math.random() * 10 + 5,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    speedY: Math.random() * 5 + 3,
                    speedX: Math.random() * 4 - 2,
                    rotation: Math.random() * 360,
                    rotationSpeed: Math.random() * 10 - 5
                });
            }
            
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                confettiParticles.forEach((particle, index) => {
                    ctx.save();
                    ctx.translate(particle.x, particle.y);
                    ctx.rotate(particle.rotation * Math.PI / 180);
                    ctx.fillStyle = particle.color;
                    ctx.fillRect(-particle.size / 2, -particle.size / 2, particle.size, particle.size * 0.6);
                    ctx.restore();
                    
                    particle.y += particle.speedY;
                    particle.x += particle.speedX;
                    particle.rotation += particle.rotationSpeed;
                    
                    // Reset particle when it goes off screen
                    if (particle.y > canvas.height) {
                        particle.y = -20;
                        particle.x = Math.random() * canvas.width;
                    }
                });
                
                requestAnimationFrame(animate);
            }
            
            animate();
        }

        // ============================================
        // HEART BURST ON CLICK
        // Creates hearts wherever user clicks
        // ============================================
        document.addEventListener('click', function(e) {
            // Don't create hearts on button clicks
            if (e.target.tagName === 'BUTTON' || e.target.tagName === 'A' || e.target.tagName === 'INPUT') {
                return;
            }
            
            createHeartBurst(e.clientX, e.clientY);
        });

        function createHeartBurst(x, y) {
            const hearts = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíì'];
            const numHearts = 8;
            
            for (let i = 0; i < numHearts; i++) {
                const heart = document.createElement('span');
                heart.className = 'heart-burst';
                heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = x + 'px';
                heart.style.top = y + 'px';
                heart.style.setProperty('--angle', (i * (360 / numHearts)) + 'deg');
                
                // Random direction
                const angle = (i * (360 / numHearts)) * (Math.PI / 180);
                const distance = 50 + Math.random() * 50;
                heart.style.animation = `burstOut 1s ease-out forwards`;
                heart.style.transform = `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px)`;
                
                document.body.appendChild(heart);
                
                setTimeout(() => heart.remove(), 1000);
            }
        }

        // ============================================
        // MUSIC CONTROL
        // Toggle background music on/off
        // ============================================
        const musicBtn = document.getElementById('musicBtn');
        const bgMusic = document.getElementById('backgroundMusic');
        let isMusicPlaying = false;

        // Audio context for celebration sounds
        let audioContext;

        function initAudio() {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
        }

        musicBtn.addEventListener('click', function() {
            isMusicPlaying = !isMusicPlaying;
            
            if (isMusicPlaying) {
                musicBtn.classList.add('playing');
                musicBtn.innerHTML = 'üé∂';
                bgMusic.play().catch(e => console.warn('Audio play failed:', e));
            } else {
                musicBtn.classList.remove('playing');
                musicBtn.innerHTML = 'üéµ';
                bgMusic.pause();
            }
        });

        // ============================================
        // YES BUTTON CELEBRATION SOUND
        // Plays a happy sound effect
        // ============================================
        function playYesSound() {
            if (!audioContext) initAudio();
            
            // Victory fanfare notes
            const fanfare = [523, 659, 784, 1047];
            
            fanfare.forEach((freq, index) => {
                setTimeout(() => {
                    const osc = audioContext.createOscillator();
                    const gain = audioContext.createGain();
                    
                    osc.connect(gain);
                    gain.connect(audioContext.destination);
                    
                    osc.frequency.value = freq;
                    osc.type = 'sine';
                    
                    gain.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    
                    osc.start(audioContext.currentTime);
                    osc.stop(audioContext.currentTime + 0.3);
                }, index * 150);
            });
        }

        // ============================================
        // CUSTOM CURSOR WITH SPARKLE TRAIL
        // ============================================
        const cursor = document.getElementById('customCursor');
        const sparkleEmojis = ['‚ú®', 'üíñ', 'üíï', '‚≠ê', 'üíó', 'üåü'];
        let lastSparkleTime = 0;

        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
            
            // Create sparkle trail
            const now = Date.now();
            if (now - lastSparkleTime > 50) {
                createSparkle(e.clientX, e.clientY);
                lastSparkleTime = now;
            }
        });

        function createSparkle(x, y) {
            const sparkle = document.createElement('span');
            sparkle.className = 'sparkle';
            sparkle.innerHTML = sparkleEmojis[Math.floor(Math.random() * sparkleEmojis.length)];
            sparkle.style.left = (x + (Math.random() - 0.5) * 20) + 'px';
            sparkle.style.top = (y + (Math.random() - 0.5) * 20) + 'px';
            sparkle.style.fontSize = (10 + Math.random() * 10) + 'px';
            document.body.appendChild(sparkle);
            
            setTimeout(() => sparkle.remove(), 1000);
        }

        // ============================================
        // STARFIELD GENERATOR
        // ============================================
        function createStarfield() {
            const starfield = document.getElementById('starfield');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                star.style.width = (Math.random() * 3 + 1) + 'px';
                star.style.height = star.style.width;
                starfield.appendChild(star);
            }
        }

        // ============================================
        // ENVELOPE ANIMATION ‚Üí LETTER REVEAL
        // ============================================
        const envelope = document.getElementById('envelope');
        const envelopeContainer = document.getElementById('envelopeContainer');
        const letterReveal = document.getElementById('letterReveal');
        const envelopeHint = document.getElementById('envelopeHint');

        envelope.addEventListener('click', function() {
            // Open the envelope flap
            this.classList.add('open');
            
            // After flap opens, shrink envelope and reveal full letter
            setTimeout(() => {
                envelopeContainer.classList.add('opened');
                if (envelopeHint) envelopeHint.style.opacity = '0';
            }, 800);

            setTimeout(() => {
                letterReveal.classList.add('visible');
            }, 1000);
        });

        // ============================================
        // PAGE NAVIGATION SYSTEM
        // ============================================
        let currentPage = 0;
        const totalPages = 7;
        const pages = document.querySelectorAll('section[data-page]');
        const dots = document.querySelectorAll('.page-dot');
        const prevBtn = document.getElementById('prevPage');
        const nextBtn = document.getElementById('nextPage');
        const pageLabel = document.getElementById('pageLabel');
        const pageNames = ['Home', 'Letter', 'Memories', 'Our Story', 'Quiz', 'Shayari', 'Proposal'];

        function goToPage(index, direction) {
            if (index < 0 || index >= totalPages || index === currentPage) return;

            const oldPage = pages[currentPage];
            const newPage = pages[index];

            // Determine exit direction
            if (direction === undefined) {
                direction = index > currentPage ? 'left' : 'right';
            }

            // Exit old page
            oldPage.classList.remove('active-page');
            oldPage.classList.add(direction === 'left' ? 'exit-left' : 'exit-right');

            // Prepare new page entry from opposite direction
            newPage.classList.remove('exit-left', 'exit-right');
            newPage.style.transition = 'none';
            newPage.classList.add(direction === 'left' ? 'exit-right' : 'exit-left');
            
            // Force reflow
            void newPage.offsetWidth;
            
            newPage.style.transition = '';
            newPage.classList.remove('exit-left', 'exit-right');
            newPage.classList.add('active-page');

            // Clean old page exit class after transition
            setTimeout(() => {
                oldPage.classList.remove('exit-left', 'exit-right');
            }, 600);

            currentPage = index;
            updatePageNav();
        }

        function updatePageNav() {
            // Update dots
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === currentPage);
            });

            // Update label
            pageLabel.textContent = pageNames[currentPage];

            // Update arrow states
            prevBtn.disabled = (currentPage === 0);
            nextBtn.disabled = (currentPage === totalPages - 1);
        }

        prevBtn.addEventListener('click', () => goToPage(currentPage - 1, 'right'));
        nextBtn.addEventListener('click', () => goToPage(currentPage + 1, 'left'));

        dots.forEach(dot => {
            dot.addEventListener('click', () => {
                const targetPage = parseInt(dot.dataset.page);
                if (targetPage !== currentPage) {
                    goToPage(targetPage, targetPage > currentPage ? 'left' : 'right');
                }
            });
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                e.preventDefault();
                goToPage(currentPage + 1, 'left');
            } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                e.preventDefault();
                goToPage(currentPage - 1, 'right');
            }
        });

        // Swipe support for mobile
        let touchStartX = 0;
        let touchStartY = 0;
        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        }, { passive: true });

        document.addEventListener('touchend', (e) => {
            const deltaX = e.changedTouches[0].screenX - touchStartX;
            const deltaY = e.changedTouches[0].screenY - touchStartY;
            // Only trigger if horizontal swipe is dominant and significant
            if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 60) {
                if (deltaX < 0) {
                    goToPage(currentPage + 1, 'left');
                } else {
                    goToPage(currentPage - 1, 'right');
                }
            }
        }, { passive: true });

        // Initialize nav state
        updatePageNav();

        // ============================================
        // ROSE PETALS GENERATOR
        // ============================================
        function createRosePetal() {
            const petal = document.createElement('span');
            petal.className = 'rose-petal';
            petal.innerHTML = ['üå∏', 'ü™ª', 'üå∫', 'üèµÔ∏è'][Math.floor(Math.random() * 4)];
            petal.style.left = Math.random() * 100 + '%';
            petal.style.fontSize = (15 + Math.random() * 15) + 'px';
            petal.style.animationDuration = (4 + Math.random() * 4) + 's';
            document.body.appendChild(petal);
            
            setTimeout(() => petal.remove(), 6000);
        }

        // ============================================
        // LOVE QUIZ FUNCTIONALITY
        // ============================================
        const quizQuestions = [
            {
                question: "How much do you love me? üíï",
                options: ["A lot üíñ", "Very much üíï", "To infinity and beyond! üöÄ‚ù§Ô∏è", "More than anything üíó"],
                correct: 2
            },
            {
                question: "What's the best thing about us? ‚ú®",
                options: ["Our chemistry üß™", "Our laughs together üòÑ", "EVERYTHING! üåü", "Our connection üí´"],
                correct: 2
            },
            {
                question: "Will you always stay with me? üíù",
                options: ["Maybe ü§î", "Probably üòä", "FOREVER AND EVER! üíï", "Yes üíñ"],
                correct: 2
            }
        ];

        let currentQuizIndex = 0;
        let quizScore = 0;

        function setupQuiz() {
            const quizOptions = document.querySelectorAll('.quiz-option');
            quizOptions.forEach((option, index) => {
                option.addEventListener('click', () => handleQuizAnswer(option, index));
            });
        }

        function handleQuizAnswer(option, index) {
            const currentQ = quizQuestions[currentQuizIndex];
            const options = document.querySelectorAll('.quiz-option');
            
            options.forEach(opt => opt.style.pointerEvents = 'none');
            
            if (index === currentQ.correct) {
                option.classList.add('correct');
                quizScore++;
                createHeartBurst(option.getBoundingClientRect().left + 100, option.getBoundingClientRect().top);
            } else {
                option.classList.add('wrong');
                options[currentQ.correct].classList.add('correct');
            }
            
            setTimeout(() => {
                currentQuizIndex++;
                if (currentQuizIndex < quizQuestions.length) {
                    loadQuizQuestion();
                } else {
                    showQuizResult();
                }
            }, 1500);
        }

        function loadQuizQuestion() {
            const q = quizQuestions[currentQuizIndex];
            document.getElementById('quizQuestion').textContent = q.question;
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';
            
            q.options.forEach((opt, idx) => {
                const optDiv = document.createElement('div');
                optDiv.className = 'quiz-option';
                optDiv.textContent = opt;
                optDiv.addEventListener('click', () => handleQuizAnswer(optDiv, idx));
                optionsContainer.appendChild(optDiv);
            });
        }

        function showQuizResult() {
            document.getElementById('quizContent').style.display = 'none';
            document.getElementById('quizResult').style.display = 'block';
            const percent = Math.round((quizScore / quizQuestions.length) * 100);
            document.getElementById('quizScore').textContent = percent + '% üíØ';
        }

        // ============================================
        // FIREWORKS EFFECT
        // ============================================
        let fireworksCanvas, fireworksCtx;
        const fireworks = [];
        const particles = [];

        function initFireworks() {
            fireworksCanvas = document.getElementById('fireworks-canvas');
            if (!fireworksCanvas) {
                fireworksCanvas = document.createElement('canvas');
                fireworksCanvas.id = 'fireworks-canvas';
                document.body.appendChild(fireworksCanvas);
            }
            fireworksCtx = fireworksCanvas.getContext('2d');
            fireworksCanvas.width = window.innerWidth;
            fireworksCanvas.height = window.innerHeight;
        }

        function createFirework(x, y) {
            const colors = ['#ff1493', '#ff6b9d', '#ff99cc', '#ff4d7a', '#ffcc00', '#00ff88'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            for (let i = 0; i < 50; i++) {
                const angle = (Math.PI * 2 / 50) * i;
                const velocity = 2 + Math.random() * 3;
                particles.push({
                    x: x,
                    y: y,
                    vx: Math.cos(angle) * velocity,
                    vy: Math.sin(angle) * velocity,
                    color: color,
                    life: 100,
                    size: 3 + Math.random() * 3
                });
            }
        }

        function animateFireworks() {
            if (!fireworksCtx) return;
            
            fireworksCtx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            fireworksCtx.fillRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
            
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.03;
                p.life--;
                p.size *= 0.98;
                
                if (p.life <= 0) {
                    particles.splice(i, 1);
                    continue;
                }
                
                fireworksCtx.beginPath();
                fireworksCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                fireworksCtx.fillStyle = p.color;
                fireworksCtx.globalAlpha = p.life / 100;
                fireworksCtx.fill();
            }
            
            fireworksCtx.globalAlpha = 1;
            requestAnimationFrame(animateFireworks);
        }

        // ============================================
        // ENHANCED CELEBRATION WITH FIREWORKS + BIG HEART
        // ============================================
        const originalYesHandler = yesBtn.onclick;
        yesBtn.onclick = null;
        yesBtn.addEventListener('click', function() {
            // Reset all celebration animations first
            const allAnimated = celebrationOverlay.querySelectorAll('.animate, .beating');
            allAnimated.forEach(el => el.classList.remove('animate', 'beating'));

            // Show overlay
            celebrationOverlay.style.display = 'flex';
            startConfetti();
            playYesSound();
            
            // Launch fireworks
            initFireworks();
            animateFireworks();
            
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    createFirework(
                        Math.random() * window.innerWidth,
                        Math.random() * window.innerHeight * 0.5
                    );
                }, i * 500);
            }

            // Staggered animation sequence (all triggered from JS)
            const crackers = celebrationOverlay.querySelectorAll('.celebration-crackers');
            const knewIt = celebrationOverlay.querySelector('.celebration-knew-it');
            const bigHeart = document.getElementById('celebBigHeart');
            const loveText = celebrationOverlay.querySelector('.celebration-love-text');
            const celebText = celebrationOverlay.querySelector('.celebration-text');

            // 0ms: Top crackers burst
            setTimeout(() => { crackers[0].classList.add('animate'); }, 100);

            // 400ms: "I Knew It!" pops in
            setTimeout(() => { knewIt.classList.add('animate'); }, 400);

            // 800ms: Big heart grows
            setTimeout(() => { bigHeart.classList.add('animate'); }, 800);

            // 1800ms: Heart starts beating
            setTimeout(() => {
                bigHeart.classList.remove('animate');
                bigHeart.classList.add('beating');
            }, 1800);

            // 2000ms: "Love You Sooo Much" fades in
            setTimeout(() => { loveText.classList.add('animate'); }, 2000);

            // 2800ms: "You Are Mine Forever" fades in
            setTimeout(() => { celebText.classList.add('animate'); }, 2800);

            // 3200ms: Bottom crackers burst
            setTimeout(() => { crackers[1].classList.add('animate'); }, 3200);

            // Spawn floating mini hearts
            const miniContainer = document.getElementById('celebMiniHearts');
            miniContainer.innerHTML = '';
            const heartEmojis = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíì', 'üíò', 'üíù', 'ü•∞', 'üòò'];
            for (let i = 0; i < 30; i++) {
                const span = document.createElement('span');
                span.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
                span.style.left = Math.random() * 100 + '%';
                span.style.fontSize = (16 + Math.random() * 24) + 'px';
                span.style.animationDelay = (Math.random() * 4) + 's';
                span.style.animationDuration = (3 + Math.random() * 3) + 's';
                miniContainer.appendChild(span);
            }
        });

        // ============================================
        // PHOTO UPLOAD HANDLING
        // ============================================
        function setupPhotoUploads() {
            const cards = document.querySelectorAll('.photo-upload-card');
            cards.forEach(card => {
                const fileInput = card.querySelector('input[type="file"]');
                const removeBtn = card.querySelector('.remove-photo');
                const captionInput = card.querySelector('.photo-caption-input');
                const index = parseInt(card.dataset.index);

                card.addEventListener('click', (e) => {
                    if (e.target === removeBtn || e.target === captionInput) return;
                    if (!card.classList.contains('has-photo')) {
                        fileInput.click();
                    }
                });

                fileInput.addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if (!file) return;

                    // Resize and compress to base64
                    const reader = new FileReader();
                    reader.onload = (ev) => {
                        const img = new Image();
                        img.onload = () => {
                            const canvas = document.createElement('canvas');
                            const MAX = 400;
                            let w = img.width, h = img.height;
                            if (w > h) { h = h * MAX / w; w = MAX; }
                            else { w = w * MAX / h; h = MAX; }
                            canvas.width = w;
                            canvas.height = h;
                            canvas.getContext('2d').drawImage(img, 0, 0, w, h);
                            const dataUrl = canvas.toDataURL('image/jpeg', 0.6);
                            valentineData.photos[index] = dataUrl;

                            // Show in card
                            let imgEl = card.querySelector('img');
                            if (!imgEl) {
                                imgEl = document.createElement('img');
                                card.appendChild(imgEl);
                            }
                            imgEl.src = dataUrl;
                            card.classList.add('has-photo');
                        };
                        img.src = ev.target.result;
                    };
                    reader.readAsDataURL(file);
                });

                removeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    valentineData.photos[index] = null;
                    valentineData.captions[index] = '';
                    const imgEl = card.querySelector('img');
                    if (imgEl) imgEl.remove();
                    card.classList.remove('has-photo');
                    fileInput.value = '';
                    captionInput.value = '';
                });

                captionInput.addEventListener('input', (e) => {
                    valentineData.captions[index] = e.target.value;
                });
            });
        }

        // ============================================
        // APPLY DATA TO PAGE
        // ============================================
        function applyValentineData() {
            // Partner name in title
            const subtitle = document.querySelector('.subtitle');
            if (valentineData.partnerName) {
                subtitle.textContent = 'For ' + valentineData.partnerName + ' üíï';
            }

            // Love letter (full reveal version)
            const letterText = document.getElementById('letterText');
            const letterGreeting = document.getElementById('letterGreeting');
            const letterSignature = document.getElementById('letterSignature');
            if (valentineData.partnerName) {
                letterGreeting.textContent = 'My Dearest ' + valentineData.partnerName + ',';
            }
            letterText.textContent = valentineData.letterMsg;
            if (valentineData.senderName) {
                letterSignature.textContent = '~ Forever yours, ' + valentineData.senderName + ' ‚ù§Ô∏è';
            }

            // Photos in memory carousel
            const memoryCards = document.querySelectorAll('.memory-card');
            valentineData.photos.forEach((photo, i) => {
                if (memoryCards[i]) {
                    const placeholder = memoryCards[i].querySelector('.memory-placeholder');
                    const caption = memoryCards[i].querySelector('.memory-caption');
                    if (photo) {
                        placeholder.classList.add('has-image');
                        let img = placeholder.querySelector('img');
                        if (!img) {
                            img = document.createElement('img');
                            placeholder.appendChild(img);
                        }
                        img.src = photo;
                        placeholder.textContent = '';
                        placeholder.appendChild(img);
                        if (valentineData.captions[i]) {
                            caption.textContent = '"' + valentineData.captions[i] + '"';
                        }
                    }
                }
            });

            // Proposal text
            const proposalQ = document.querySelector('.proposal-question');
            if (valentineData.partnerName) {
                proposalQ.innerHTML = valentineData.partnerName + ', Will You Be My Valentine? ‚ù§Ô∏è';
            }

            // Celebration text
            const celebKnewIt = document.querySelector('.celebration-knew-it');
            const celebLoveText = document.querySelector('.celebration-love-text');
            const celebText = document.querySelector('.celebration-text');
            if (valentineData.partnerName) {
                celebKnewIt.innerHTML = 'I Knew It, ' + valentineData.partnerName + '! üéâ';
                celebLoveText.innerHTML = 'Love You Sooo Much üíï';
                celebText.innerHTML = 'You Are Mine Forever ‚ù§Ô∏è';
            }
        }

        // ============================================
        // LAUNCH / CREATE VALENTINE
        // ============================================
        document.getElementById('launchBtn').addEventListener('click', function() {
            // Gather inputs
            valentineData.senderName = document.getElementById('editSenderName').value.trim();
            valentineData.partnerName = document.getElementById('editPartnerName').value.trim();
            valentineData.meetDate = document.getElementById('editMeetDate').value || '2023-02-14';
            valentineData.letterMsg = document.getElementById('editLetterMsg').value.trim() || valentineData.letterMsg;

            // Apply to page
            applyValentineData();

            // Hide edit panel
            document.getElementById('editPanel').classList.add('hidden');

            // Show page navigation
            document.getElementById('pageNav').style.display = 'flex';

            // Show share/edit buttons
            document.getElementById('shareBtn').classList.add('visible');
            document.getElementById('editModeBtn').classList.add('visible');

            // Reset to page 0
            currentPage = 0;
            pages.forEach(p => { p.classList.remove('active-page', 'exit-left', 'exit-right'); });
            pages[0].classList.add('active-page');
            updatePageNav();

            // Auto-play music
            bgMusic.play().catch(e => console.warn('Autoplay blocked:', e));
            isMusicPlaying = true;
            musicBtn.classList.add('playing');
            musicBtn.innerHTML = 'üé∂';

            isViewMode = true;
        });

        // ============================================
        // EDIT MODE BUTTON (go back to editor)
        // ============================================
        document.getElementById('editModeBtn').addEventListener('click', function() {
            document.getElementById('editPanel').classList.remove('hidden');
            document.getElementById('pageNav').style.display = 'none';
            isViewMode = false;
        });

        // ============================================
        // SHARE FUNCTIONALITY
        // ============================================
        function generateShareData() {
            // Build a compact data object
            const data = {
                s: valentineData.senderName,
                p: valentineData.partnerName,
                d: valentineData.meetDate,
                l: valentineData.letterMsg,
                ph: valentineData.photos.filter(Boolean),
                c: valentineData.captions.filter((c, i) => valentineData.photos[i])
            };
            return data;
        }

        // ============================================
        // CLOUD STORAGE (jsonblob.com - free, no auth)
        // ============================================
        async function saveToCloud(data) {
            try {
                const response = await fetch('https://jsonblob.com/api/jsonBlob', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                if (response.ok || response.status === 201) {
                    const location = response.headers.get('Location');
                    if (location) {
                        return location.split('/').pop();
                    }
                    // Fallback: try to get ID from response body
                    const text = await response.text();
                    try {
                        const body = JSON.parse(text);
                        if (body.id) return body.id;
                    } catch(e) {}
                }
                return null;
            } catch(e) {
                console.warn('Cloud save failed:', e);
                return null;
            }
        }

        async function loadFromCloud(blobId) {
            try {
                const response = await fetch('https://jsonblob.com/api/jsonBlob/' + blobId, {
                    headers: { 'Accept': 'application/json' }
                });
                if (response.ok) {
                    return await response.json();
                }
                return null;
            } catch(e) {
                console.warn('Cloud load failed:', e);
                return null;
            }
        }

        async function saveAndGetLink() {
            const data = generateShareData();
            // Try cloud storage first
            const blobId = await saveToCloud(data);
            const baseUrl = window.location.href.split('#')[0].split('?')[0];

            if (blobId) {
                // Short URL with cloud ID
                return baseUrl + '?v=' + blobId;
            }

            // Fallback: base64 in URL (may be too long for photos)
            const jsonStr = JSON.stringify(data);
            const encoded = btoa(unescape(encodeURIComponent(jsonStr)));
            return baseUrl + '?data=' + encodeURIComponent(encoded);
        }

        document.getElementById('shareBtn').addEventListener('click', async function() {
            const shareModal = document.getElementById('shareModal');
            const shareLinkInput = document.getElementById('shareLinkInput');
            const copyStatus = document.getElementById('copyStatus');

            // Show modal with loading state
            shareModal.classList.add('active');
            shareLinkInput.value = '';
            copyStatus.textContent = '‚è≥ Saving your valentine data online...';
            copyStatus.style.color = '#ffcc00';

            try {
                const link = await saveAndGetLink();
                shareLinkInput.value = link;
                
                if (link.includes('?v=')) {
                    copyStatus.textContent = '‚úÖ Data saved online! Share this link safely.';
                    copyStatus.style.color = '#00ff88';
                } else {
                    copyStatus.textContent = '‚ö†Ô∏è Cloud save failed. Link may be too long for photos.';
                    copyStatus.style.color = '#ffcc00';
                }
            } catch(e) {
                copyStatus.textContent = '‚ùå Error generating link. Try again.';
                copyStatus.style.color = '#ff4d4d';
            }
        });

        document.getElementById('copyLinkBtn').addEventListener('click', function() {
            const input = document.getElementById('shareLinkInput');
            input.select();
            navigator.clipboard.writeText(input.value).then(() => {
                document.getElementById('copyStatus').textContent = '‚úÖ Link copied! Send it to your love!';
            }).catch(() => {
                document.execCommand('copy');
                document.getElementById('copyStatus').textContent = '‚úÖ Link copied!';
            });
        });

        document.getElementById('shareWhatsapp').addEventListener('click', function() {
            const link = document.getElementById('shareLinkInput').value;
            const msg = valentineData.partnerName
                ? `üíï Hey ${valentineData.partnerName}! I made something special for you... Open this: ${link}`
                : `üíï I made something special for you! Open this: ${link}`;
            window.open('https://wa.me/?text=' + encodeURIComponent(msg), '_blank');
        });

        document.getElementById('shareTelegram').addEventListener('click', function() {
            const link = document.getElementById('shareLinkInput').value;
            window.open('https://t.me/share/url?url=' + encodeURIComponent(link) + '&text=' + encodeURIComponent('üíï I made something special for you!'), '_blank');
        });

        document.getElementById('shareClose').addEventListener('click', function() {
            document.getElementById('shareModal').classList.remove('active');
        });

        // ============================================
        // LOAD FROM URL (viewer mode)
        // ============================================
        // ============================================
        // LOAD FROM URL (viewer mode)
        // ============================================
        async function loadFromURL() {
            const params = new URLSearchParams(window.location.search);

            // Check for cloud-stored data first (?v=blobId)
            const blobId = params.get('v');
            if (blobId) {
                const data = await loadFromCloud(blobId);
                if (data) {
                    valentineData.senderName = data.s || '';
                    valentineData.partnerName = data.p || '';
                    valentineData.meetDate = data.d || '2023-02-14';
                    valentineData.letterMsg = data.l || valentineData.letterMsg;
                    if (data.ph) {
                        data.ph.forEach((ph, i) => { valentineData.photos[i] = ph; });
                    }
                    if (data.c) {
                        data.c.forEach((c, i) => { valentineData.captions[i] = c; });
                    }
                    return true;
                }
            }

            // Fallback: base64 data in URL (?data=...)
            const encoded = params.get('data');
            if (!encoded) return false;

            try {
                const jsonStr = decodeURIComponent(escape(atob(decodeURIComponent(encoded))));
                const data = JSON.parse(jsonStr);
                valentineData.senderName = data.s || '';
                valentineData.partnerName = data.p || '';
                valentineData.meetDate = data.d || '2023-02-14';
                valentineData.letterMsg = data.l || valentineData.letterMsg;
                if (data.ph) {
                    data.ph.forEach((ph, i) => { valentineData.photos[i] = ph; });
                }
                if (data.c) {
                    data.c.forEach((c, i) => { valentineData.captions[i] = c; });
                }
                return true;
            } catch(e) {
                console.warn('Failed to load shared data:', e);
                return false;
            }
        }

        // ============================================
        // INITIALIZE EVERYTHING ON PAGE LOAD
        // ============================================
        document.addEventListener('DOMContentLoaded', async function() {
            createFloatingHearts();
            createStarfield();
            setupQuiz();
            setupPhotoUploads();

            const pageNavEl = document.getElementById('pageNav');
            const loadingOverlay = document.getElementById('loadingOverlay');
            const hasCloudParam = new URLSearchParams(window.location.search).has('v');

            // Show loading overlay if fetching cloud data
            if (hasCloudParam) {
                loadingOverlay.style.display = 'flex';
            }

            // Check if opened from a shared link
            const fromLink = await loadFromURL();

            // Hide loading overlay
            if (hasCloudParam) {
                loadingOverlay.classList.add('hidden');
                setTimeout(() => { loadingOverlay.style.display = 'none'; }, 600);
            }

            if (fromLink) {
                // View mode - hide edit panel, show page
                document.getElementById('editPanel').classList.add('hidden');
                applyValentineData();
                isViewMode = true;
                pageNavEl.style.display = 'flex';

                // Auto-play music (needs user gesture on most browsers)
                // Try autoplay; if blocked, start on first click/tap
                bgMusic.play().then(() => {
                    isMusicPlaying = true;
                    musicBtn.classList.add('playing');
                    musicBtn.innerHTML = 'üé∂';
                }).catch(() => {
                    // Autoplay blocked ‚Äî start on first user interaction
                    const startMusic = () => {
                        bgMusic.play();
                        isMusicPlaying = true;
                        musicBtn.classList.add('playing');
                        musicBtn.innerHTML = 'üé∂';
                        document.removeEventListener('click', startMusic);
                        document.removeEventListener('touchstart', startMusic);
                    };
                    document.addEventListener('click', startMusic, { once: false });
                    document.addEventListener('touchstart', startMusic, { once: false });
                });
            } else {
                // Creator mode - show edit panel, hide page nav
                document.getElementById('editPanel').classList.remove('hidden');
                pageNavEl.style.display = 'none';
            }

            updateLoveCounter();
            // Update counter every second
            setInterval(updateLoveCounter, 1000);
            
            // Create rose petals periodically
            setInterval(createRosePetal, 2000);
            
            // Show cursor for touch devices
            if ('ontouchstart' in window) {
                document.body.style.cursor = 'auto';
                cursor.style.display = 'none';
            }
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            const canvas = document.getElementById('confetti-canvas');
            if (canvas) {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            if (fireworksCanvas) {
                fireworksCanvas.width = window.innerWidth;
                fireworksCanvas.height = window.innerHeight;
            }
        });
    </script>

</body>
</html>